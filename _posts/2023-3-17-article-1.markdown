---
layout: post
title:  "シェルスクリプト上で環境変数が呼び出せない"
date:   2023-03-17 12:29:05 +0900
---

# 問題
シェルスクリプト上で環境変数を呼び出すことができず、間違ったプロファイルが設定された環境のバッチがこけた。

# 原因
サブシェルの場合、ターミナルの環境変数が呼び出せない場合があるらしいが、正確には原因不明。バッチを実行するユーザーとシェル実行ユーザーが違う場合がある。

# 対応
環境別にバッチ実行ファイルを用意して、CodeDeployのデプロイスクリプトで環境別に配置するようにスクリプトを変更した。